# appliku.yml - GameShop application configuration
# Use environment variables for secrets in production

defaults: &defaults
  app:
    name: GameShop
    version: 1.0.0
    timezone: UTC
    default_locale: en
    host: 0.0.0.0
    port: 8080

  database:
    driver: postgres
    host: localhost
    port: 5432
    name: gameshop
    user: gameshop_user
    password: changeme
    pool:
      max: 20
      min: 2
      idle_timeout: 30000

  cache:
    driver: redis
    host: localhost
    port: 6379
    ttl_seconds: 3600

  storage:
    driver: local
    path: ./storage
    s3:
      bucket: gameshop-assets
      region: us-east-1
      endpoint: https://s3.amazonaws.com
      acl: private

  payments:
    stripe:
      enabled: false
      api_key: ${STRIPE_API_KEY}
    paypal:
      enabled: false
      client_id: ${PAYPAL_CLIENT_ID}
      client_secret: ${PAYPAL_CLIENT_SECRET}

  mail:
    driver: smtp
    smtp:
      host: smtp.example.com
      port: 587
      username: user@example.com
      password: ${SMTP_PASSWORD}
      secure: false
    from:
      address: no-reply@gameshop.example
      name: GameShop

  security:
    jwt:
      secret: ${JWT_SECRET}
      algorithm: HS256
      ttl_seconds: 3600
    allowed_origins:
      - http://localhost:3000

  logging:
    level: info
    format: json
    file: ./logs/app.log
    rotate:
      max_size_mb: 100
      max_files: 7

  features:
    guest_checkout: true
    reviews: true
    recommendations: true
    analytics: false

  limits:
    items_per_page: 24
    max_upload_mb: 20
    rate_limit:
      window_seconds: 60
      max_requests: 120

environments:
  development:
    <<: *defaults
    app:
      host: 127.0.0.1
      port: 3000
      debug: true
    database:
      name: gameshop_dev
      password: dev_password
    cache:
      ttl_seconds: 600
    payments:
      stripe:
        enabled: true
    logging:
      level: debug
      format: text

  staging:
    <<: *defaults
    app:
      host: staging.gameshop.local
      port: 4000
      debug: false
    database:
      name: gameshop_staging
      password: ${STAGING_DB_PASSWORD}
    payments:
      stripe:
        enabled: true
    analytics:
      enabled: true

  production:
    <<: *defaults
    app:
      host: 0.0.0.0
      port: 8080
      debug: false
    database:
      host: ${DB_HOST}
      port: ${DB_PORT}
      name: ${DB_NAME}
      user: ${DB_USER}
      password: ${DB_PASSWORD}
      pool:
        max: 50
        min: 4
    cache:
      host: ${REDIS_HOST}
      port: ${REDIS_PORT}
      ttl_seconds: 3600
    storage:
      driver: s3
      s3:
        bucket: ${S3_BUCKET}
        region: ${S3_REGION}
        endpoint: ${S3_ENDPOINT}
        acl: private
    payments:
      stripe:
        enabled: true
        api_key: ${STRIPE_API_KEY}
      paypal:
        enabled: true
        client_id: ${PAYPAL_CLIENT_ID}
        client_secret: ${PAYPAL_CLIENT_SECRET}
    mail:
      smtp:
        host: ${SMTP_HOST}
        port: ${SMTP_PORT}
        username: ${SMTP_USER}
        password: ${SMTP_PASSWORD}
        secure: true
    security:
      jwt:
        secret: ${JWT_SECRET}
        ttl_seconds: 86400
    logging:
      level: info
      format: json
      file: /var/log/gameshop/app.log